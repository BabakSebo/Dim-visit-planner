<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Planner üóìÔ∏è</title>
  <style>
    :root {
      --green: #0B3D2E;
      --white: #ffffff;
      --ivory: #fefefe;
      --accent: #e0e0d1;
      --font-main: Georgia, 'Times New Roman', Times, serif;
    }

    body {
      margin: 0;
      padding: 1rem;
      font-family: var(--font-main);
      background-color: var(--green);
      color: var(--white);
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 {
      text-align: center;
      font-size: 1.75rem;
      margin-bottom: 1rem;
      color: var(--white);
      border-bottom: 2px solid var(--white);
      padding-bottom: 0.5rem;
      width: 100%;
    }

    .tokens-container {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .token-wrapper {
      text-align: center;
      width: 70px;
    }

    .token-wrapper img {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      object-fit: cover;
      object-position: top;
      border: 2px solid var(--white);
    }

    .token-wrapper span {
      display: block;
      font-size: 0.8rem;
      margin-top: 4px;
      color: var(--white);
    }

    .calendar-wrapper {
      width: 100%;
      overflow-x: auto;
      background: var(--ivory);
      border-radius: 12px;
      padding: 1rem;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }

    .calendar {
      display: grid;
      grid-template-columns: 80px repeat(24, minmax(60px, 1fr));
      min-width: 1000px;
    }

    .header-cell {
      font-size: 0.7rem;
      font-weight: bold;
      text-align: center;
      padding: 0.5rem 0.3rem;
      background: var(--green);
      color: var(--white);
      border: 1px solid #ccc;
      white-space: nowrap;
    }

    .row-label {
      font-size: 0.75rem;
      font-weight: bold;
      text-align: center;
      background: var(--green);
      color: var(--white);
      border: 1px solid #ccc;
      padding: 0.3rem;
    }

    .cell {
      border: 1px solid #ccc;
      padding: 4px;
      background-color: var(--white);
      position: relative;
      box-sizing: border-box;
      display: flex;
      align-items: flex-start;
      justify-content: center;
      min-height: 110px;
      height: auto;
    }

    .token-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 4px;
      justify-items: center;
      align-items: center;
    }

    .token {
      position: relative;
      width: 32px;
      height: 32px;
    }

    .token img {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
      object-position: top;
    }

    .remove {
      position: absolute;
      top: -4px;
      right: -4px;
      background: red;
      color: white;
      font-size: 10px;
      border: none;
      border-radius: 50%;
      width: 14px;
      height: 14px;
      line-height: 14px;
      text-align: center;
      cursor: pointer;
    }

    @media (max-width: 600px) {
      h1 {
        font-size: 1.4rem;
      }

      .calendar {
        grid-template-columns: 70px repeat(24, minmax(50px, 1fr));
      }

      .header-cell,
      .row-label {
        font-size: 0.6rem;
      }

      .cell {
        min-height: 110px;
      }
    }
  </style>
</head>
<body>
  <h1>üóìÔ∏è Calendar üóìÔ∏è</h1>

  <div class="tokens-container">
    <div class="token-wrapper">
      <img src="tokens/Riddler.png" draggable="true" id="Riddler" data-id="Riddler" />
      <span>Riddler</span>
    </div>
    <div class="token-wrapper">
      <img src="tokens/Gunju.png" draggable="true" id="Gunju" data-id="Gunju" />
      <span>Gunju</span>
    </div>
    <div class="token-wrapper">
      <img src="tokens/Yipak.png" draggable="true" id="Yipak" data-id="Yipak" />
      <span>Yipak</span>
    </div>
    <div class="token-wrapper">
      <img src="tokens/Ronald.png" draggable="true" id="Ronald" data-id="Ronald" />
      <span>Ronald</span>
    </div>
  </div>

  <div class="calendar-wrapper">
    <div id="calendar" class="calendar"></div>
  </div>

  <script>
    const dates = [
      "Apr 18", "Apr 19", "Apr 20", "Apr 21", "Apr 22", "Apr 23", "Apr 24", "Apr 25",
      "Apr 26", "Apr 27", "Apr 28", "Apr 29", "Apr 30", "May 01", "May 02", "May 03",
      "May 04", "May 05", "May 06", "May 07", "May 08", "May 09", "May 10", "May 11"
    ];
    const activities = [
      "‚õ≥ Golf AM",
      "üèåÔ∏è Golf PM",
      "üéæ Padel",
      "ü•©üç∑ Fazenda"
    ];
    const calendar = document.getElementById("calendar");

    // Create Header Row
    calendar.appendChild(document.createElement("div")); // Empty corner
    dates.forEach(date => {
      const header = document.createElement("div");
      header.className = "header-cell";
      header.textContent = date;
      calendar.appendChild(header);
    });

    // Create Calendar Grid
    activities.forEach(activity => {
      const label = document.createElement("div");
      label.className = "row-label";
      label.textContent = activity;
      calendar.appendChild(label);

      dates.forEach((date, i) => {
        const cell = document.createElement("div");
        cell.className = "cell";

        const grid = document.createElement("div");
        grid.className = "token-grid";
        cell.appendChild(grid);

        cell.ondragover = (e) => e.preventDefault();
        cell.ondrop = (e) => {
          e.preventDefault();
          const id = e.dataTransfer.getData("text/plain");

          // Check if user already exists in this cell
          if (grid.querySelector(`[data-id="${id}"]`)) return;

          const wrapper = document.createElement("div");
          wrapper.className = "token";

          const original = document.getElementById(id);
          const img = original.cloneNode(true);
          img.removeAttribute("draggable");
          img.setAttribute("data-id", id);
          img.style.objectPosition = "top";

          const remove = document.createElement("button");
          remove.className = "remove";
          remove.textContent = "‚úñ";
          remove.onclick = () => wrapper.remove();

          wrapper.appendChild(img);
          wrapper.appendChild(remove);
          grid.appendChild(wrapper);
        };

        calendar.appendChild(cell);
      });
    });

    // Enable drag events
    document.querySelectorAll(".tokens-container img").forEach(img => {
      img.addEventListener("dragstart", e => {
        e.dataTransfer.setData("text/plain", img.id);
      });
    });

    // üõë Prevent pull-to-refresh on touch drag
    let isDragging = false;
    document.addEventListener("touchstart", () => { isDragging = true; }, { passive: false });
    document.addEventListener("touchmove", (e) => {
      if (isDragging) e.preventDefault();
    }, { passive: false });
    document.addEventListener("touchend", () => { isDragging = false; });
  </script>
</body>
</html>
